<template name="userList">
  {{#if currentUser}}
    <div class="card user-list">
      <div class="card-header">
        <button class="btn btn-light action-create-user" style="margin-left:5px;margin-top:5px;">
          <span class="fa fa-user-add"></span>
          <span class="d-none d-sm-inline"> Neuen Nutzer anlegen</span>
        </button>
        <div class="float-end">
          <button type="button" class="btn btn-light action-less-users {{#if equals paginationPos 1}}disabled{{/if}}">
            <span class="fa fa-chevron-left"></span>
          </button>
          <button type="button" class="btn btn-light disabled">
            Seite {{paginationPos}} / {{totalPages}}
          </button>
          <button type="button" class="btn btn-light action-more-users {{#if equals paginationPos totalPages}}disabled{{/if}}">
            <span class="fa fa-chevron-right"></span>
          </button>
        </div>
        <table class="table table-striped table-hover">
          <thead>
            <tr>
              <th scope="col">
                Bild
                <span class="fa fa-sort" data-sort="profile.avatar"></span>
              </th>
              <th scope="col">
                Name
                <span class="fa fa-sort-desc" data-sort="username"></span>
              </th>
              <th scope="col">
                Vorname
                <span class="fa fa-sort" data-sort="profile.name"></span>
              </th>
              <th scope="col">
                Nachname
                <span class="fa fa-sort" data-sort="profile.surname"></span>
              </th>
              <th scope="col">
                Geburtstag
                <span class="fa fa-sort" data-sort="profile.birthday"></span>
              </th>
              <th scope="col">
                Aktionen
              </th>
              <th scope="col">
                Verein
                <span class="fa fa-sort" data-sort="club.state"></span>
              </th>
            </tr>
          </thead>
          <tbody>
            {{#if Template.subscriptionsReady}}
                {{#each users}}
                  <tr class="action-goto-user pointer">
                    {{>userItem}}
                  </tr>
                {{else}}
                  {{> Empty}}
                {{/each}}
            {{else}}
              <tr><td colspan="7">{{> Loading}}</td></tr>
              
            {{/if}}
          </tbody>
        </table>
      </div>
      <div class="card-footer">
        <button class="btn btn-light action-create-user" style="margin-left:5px;margin-top:5px;">
          <span class="fa fa-user-add"></span>
          <span class="d-none d-sm-inline"> Neuen Nutzer anlegen</span>
        </button>
        <div class="float-end">
          <button type="button" class="btn btn-light action-less-users {{#if equals paginationPos 1}}disabled{{/if}}">
            <span class="fa fa-chevron-left"></span>
          </button>
          <button type="button" class="btn btn-light disabled">
            Seite {{paginationPos}} / {{totalPages}}
          </button>
          <button type="button" class="btn btn-light action-more-users {{#if equals paginationPos totalPages}}disabled{{/if}}">
            <span class="fa fa-chevron-right"></span>
          </button>
        </div>
      </div>
    </div>
  {{/if}}
</template>

<template name="userItem">
    <td>
      {{#if profile.avatar}}
        <img height="48px" src="{{imageUrl profile.avatar 160}}">
      {{else}}
        <img height="48px" src="/placeholder/player.svg">
      {{/if}}
    </td>
    <td>
      {{getAlias this}}
    </td>
    <td>
      {{profile.name}}
    </td>
    <td>
      {{profile.surname}}
    </td>
    <td>
      {{formatDate profile.birthday}}
    </td>
    <td>
      {{#each emails}}
        <a href="mailto:{{this.address}}" class="btn btn-link"><span class="fa fa-envelope"></span></a>
      {{/each}}
      {{#each profile.contactDetails}}
        {{#if equals this.type "Tel.Mobil"}}
          <a href="tel:{{this.detail}}" class="btn btn-link"><span class="fa fa-phone"></span></a>
        {{/if}}
      {{/each}}
    </td>
    <td>
      {{#if isInRole "club,admin"}}
        {{#if settings.clubName}}
          <button class="btn btn-light action-club-state">
            <span class="{{#if club.state}}text-success{{else}}text-muted{{/if}}">{{settings.clubShort}}</span>
          </button>
        {{/if}}
        <button class="btn btn-light action-club-dfv">
          <span class="{{#if currentDFV}}text-success{{else}}text-muted{{/if}}">DFV:{{lastDFV}}</span>
        </button>
        <button class="btn btn-light action-debit">
          <span class="{{#if profile.debit}}text-danger{{else}}text-success{{/if}}"><span class="fa fa-eur"></span> {{profile.debit}}</span>
        </button>

      {{else}}{{club.state}} {{/if}}
    </td>
</template>