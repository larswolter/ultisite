<template name="autoForm">
    <form id="{{formId}}">
        {{>Template.contentBlock this}}
    </form>
</template>

<template name="quickForm">
    {{#autoForm}}
        {{>afQuickFields}}
    {{/autoForm}}
</template>

<template name="afQuickField">
    {{#if this.template}}
        {{>Template.dynamic template=template}}
    {{else}}
        {{#with fieldData}}
            {{#if isObject}}
                {{>afObjectField this}}
            {{else}}
                {{#if isArray}}
                    {{>afArrayField this}}
                {{else}}
                    <div class="form-group {{validity}}">
                        <label class="control-label">{{this.label}}</label>
                        {{>afFieldInput}}
                        <span class="help-block">{{help}}</span>
                    </div>
                {{/if}}
            {{/if}}
        {{/with}}
    {{/if}}
</template>

<template name="afFieldInput">
    {{#with fieldData}}
        {{#if equals type "hidden"}}
            <input name="{{name}}" type="hidden" value="{{getFieldValue}}"/>
        {{else}}
            {{#if readOnly}}
                <span class="control-static">{{value}}</span>
            {{else}}
                {{#if autoform.options}}
                    <select class="form-control">
                    {{#each autoform.options}}
                        <option value="{{value}}" selected={{equals value getFieldValue}}>{{label}}</option>
                    {{/each}}
                    </select> 
                {{else}}
                    <input name="{{name}}" type="{{type}}" class="form-control" value="{{getFieldValue}}" autocomplete={{autocomplete}} placeholder={{placeholder}}/>
                {{/if}}
            {{/if}}
        {{/if}}
    {{/with}}
</template>

<template name="afObjectField">
    <div class="form-group">
        <label class="control-label">{{this.label}}</label>
        {{#each fields}}
            {{>afQuickField}}
        {{/each}}
    </div>
</template>
<template name="afArrayField">
    <div class="form-group">
        <label class="control-label">{{this.label}}</label>
        <div class="list-group">
        {{#each elements}}
            <div class="list-group-item">
                {{>afQuickField}}            
            </div>
        {{/each}}
        </div>
        {{>afQuickField name=this.name type=subType}}
    </div>
</template>

<template name="afQuickFields">
    {{#each fields}}
        {{>afQuickField}}
    {{/each}}
</template>